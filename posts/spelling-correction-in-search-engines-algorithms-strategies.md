---
title: "Spelling Correction in Search Engines – Algorithms & Strategies"
date: "2016-02-28"
canonical: "https://prdeepakbabu.wordpress.com/2016/02/29/spelling-correction-in-search-engines-algorithms-strategies/"
source: "wordpress"
---
<h1>Information Retrieval : Spell Correction in Search Engines – Algorithms &amp; Strategies </h1>
<p>Spell Checking &amp; Correction is an important component of any information retrieval(aka document retrieval) system like Google, Bing, amazon, eBay and alike. User specifies his/her information need in the form of search query, which is later used by IR system to retrieve ranked set of relevant documents. For example, user might search &#8220;red shirt&#8221; hoping to see shirts which are red in color. Since the search string is a human language input, it is quite common for spell errors to occur while being typed. It becomes crucial to detect and correct for spell error before sending it to relevance engine to fetch relevant documents.<br />
In this blog post, my main focus is to talk about a specific type of error that is more common in apps called fat-finger error and how we could use it strategically to improve speller accuracy. Before we get to this, briefly discussing how a spell checking/correction happens traditionally. Feel free to skip to the next two paragraphs if you are already aware of how spell check/correct works.</p>
<p><strong> How spell checking/correction traditionally works ?<br />
</strong></p>
<p>The classic method relies on a dictionary based approach, search text is tokenized into words. Each word is checked against a dictionary, if the word is in the dictionary, then it assumes spelling is correct. If the word doesn&#8217;t exactly match any word in dictionary, spell correction is needed. Edit distance measure is calculated between tokenized word and every word in dictionary to find close/similar words. Word with least(say one) edit distance is replaced as spell-corrected word. In most cases, more than one word with edit distance one would show-up, hence most spell correct algorithms use additional information like frequency of word to decide the most best possible word to replace. In practical setup, collation and normalization would be used in addition to the above mentioned underlying principle.</p>
<p><img data-attachment-id="8475" data-permalink="https://prdeepakbabu.wordpress.com/2016/02/29/spelling-correction-in-search-engines-algorithms-strategies/editdist/" data-orig-file="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/editdist.jpg" data-orig-size="502,210" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="editdist" data-image-description="" data-image-caption="" data-medium-file="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/editdist.jpg?w=300" data-large-file="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/editdist.jpg?w=502" class="  wp-image-8475 aligncenter" src="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/editdist.jpg?w=390&#038;h=163" alt="editdist" width="390" height="163" srcset="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/editdist.jpg?w=390&amp;h=163 390w, https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/editdist.jpg?w=150&amp;h=63 150w, https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/editdist.jpg?w=300&amp;h=125 300w, https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/editdist.jpg 502w" sizes="(max-width: 390px) 100vw, 390px" /><br />
To get a little deeper into edit distance &#8211; edit distance is the minimum number of operations needed to transform string A to string B. The operations could be INSERT(I), DELETE(D), REPLACE(R), TRANSPOSE(T) (illustrated in pic below). Depending on what type of operations are supported, we have different variants of edit distance measures. For instance, levenshtein distance supports only INSERT, DELETE and REPLACE which is one of the most commonly used in industry. Since there are going to be various ways of doing IDRT operations, a technique called dynamic programming is used to make computations faster.</p>
<p style="text-align:center;">edit distance(Ineoramtan,Information) = 4</p>
<p>Getting back to main topic, In this age of start-ups, there are interesting marketplaces/eCommerce companies getting built for almost everything not just consumer products/electronics but for household services, groceries, ride sharing,etc. For all these to be successful, content discovery through a fundamentally strong search system becomes a key differentiator. Marketplaces offer choice to consumers to search via mobile site, desktop web and Mobile App. As these channels come with different form factors in display/input format &#8211; for example, users searching on app might have touch screen experience with a small qwerty keyboard vs. web user who might have a big desktop keyboard input. Hence algorithms that work behind each of channels need to be customized leveraging these differences in interaction experience.</p>
<p><strong><span style="color:#993300;">It all started with this hypothesis, &#8220;Given form-factor differences between web searches vs. app searches, are there any distinct spelling error patterns in web vs. app which can be leveraged for improving our speller accuracy ?&#8221; </span></strong></p>
<p>I looked at all searches for the last 7 days that happened on web vs. app. Ran a standard speller to identify misspelled words(considering only 1 edit distance apart) and classified them by operation (Insert, Delete, Replace, Transpose) and plotted them side by side on a bar chart (see chart). One thing stood out, there was a significant difference in no. of replace operations seen between web vs. app. ie App searches have higher replace based spell corrections compared to web.</p>

<a href='https://prdeepakbabu.wordpress.com/2016/02/29/spelling-correction-in-search-engines-algorithms-strategies/chart/'><img width="150" height="102" src="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/chart.png?w=150" class="attachment-thumbnail size-thumbnail" alt="" srcset="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/chart.png?w=150 150w, https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/chart.png?w=300 300w" sizes="(max-width: 150px) 100vw, 150px" data-attachment-id="8453" data-permalink="https://prdeepakbabu.wordpress.com/2016/02/29/spelling-correction-in-search-engines-algorithms-strategies/chart/" data-orig-file="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/chart.png" data-orig-size="859,582" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="chart" data-image-description="" data-image-caption="&lt;p&gt;Spell Error Comparison &amp;#8211; Web vs. App&lt;/p&gt;
" data-medium-file="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/chart.png?w=300" data-large-file="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/chart.png?w=545" /></a>
<a href='https://prdeepakbabu.wordpress.com/2016/02/29/spelling-correction-in-search-engines-algorithms-strategies/qwerty/'><img width="90" height="150" src="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/qwerty.png?w=90" class="attachment-thumbnail size-thumbnail" alt="" srcset="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/qwerty.png?w=90 90w, https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/qwerty.png?w=180 180w" sizes="(max-width: 90px) 100vw, 90px" data-attachment-id="8454" data-permalink="https://prdeepakbabu.wordpress.com/2016/02/29/spelling-correction-in-search-engines-algorithms-strategies/qwerty/" data-orig-file="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/qwerty.png" data-orig-size="378,627" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="qwerty" data-image-description="" data-image-caption="" data-medium-file="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/qwerty.png?w=181" data-large-file="https://prdeepakbabu.wordpress.com/wp-content/uploads/2016/02/qwerty.png?w=378" /></a>

<p>This definitely looks like a pattern. Lets look at some example replace operations in app &#8211; panasinic, oendrive, nikin &#8211; what do you think, they have in common ? All have one replace operation needed for spell correction. But most interestingly, all of the replace operations involve adjacent letters in the qwerty layout. Panasi[o]nic needed one replace operation from i to o, o appears just next to i in the qwerty layout. Now, why does this happen ? It is easy to reason why &#8211; fat finger syndrome. More below.</p>
<p><strong>What is fat finger error ?</strong><br />
It is a source of common spell error in smartphones. As app users, we are more likely to misspell by clicking adjacent letters(to left or right) instead of the intended one. For example: If user intends to search &#8220;shoes&#8221;, the most likely spell errors as seen in our searches on app is &#8220;shor[e]s&#8221; or &#8220;shi[o]es&#8221;. If we check the keyboard layout, &#8216;e&#8217; occurs before &#8216;r&#8217; so user intended to click &#8216;e&#8217; but mistakenly adjacent letter &#8216;r&#8217; got in. Similarly, &#8216;i&#8217; occurs before &#8216;o&#8217;, so the user here intended &#8216;o&#8217; but the adjacent letter &#8216;i&#8217; got in. The difference in replace based operations is mainly attributable to such replace operations involving adjacent proximity letters in keyboard layout.<br />
Fun bit about fat finger error, source of this word goes back to investment banking where traders bidding for a stock commit errors due to which actual bid/order placed is much higher than intended value leading financial loss &#8211; something like short selling 1,00,000 shares instead of 10,000 due to an extra 0.</p>
<p><strong>Given this insight, How could we make our speller channel-aware and intelligent ? </strong><br />
By giving more weight-age to &#8216;replace&#8217; based edit distance operations involving proximity letters in app searches would help increase accuracy of speller. As of this writing, none of the commercially available spell checker modules provide flexibility in such features. Even the default speller module in Apache Solr/elastic search don&#8217;t support them yet.</p>
<p>Hope this piece of research help to build upon accuracy of spell correction. Please feel free to shoot me an email/comment for questions/clarifications.</p>